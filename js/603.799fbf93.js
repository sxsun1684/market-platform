"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[603],{3603:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("div",{staticStyle:{width:"80%","background-color":"white",margin:"30px auto","border-radius":"20px"}},[t("div",{staticStyle:{"padding-bottom":"10px"}},[t("div",{staticStyle:{"font-size":"18px",color:"#000000FF","line-height":"80px","border-bottom":"#cccccc 1px solid"}},[t("div",{staticStyle:{"margin-left":"20px"}},[e._v("My Order: "+e._s(e.ordersData.length)+" "+e._s(e.ordersData.length>1?"Pieces":"Piece"))])]),t("div",{staticStyle:{margin:"20px 0",padding:"0 40px"}},[t("div",{staticClass:"table"},[t("el-table",{attrs:{data:e.ordersData,strip:""}},[t("el-table-column",{attrs:{label:"Product Picture",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.goodsImg?t("el-image",{staticStyle:{width:"80px",height:"60px","border-radius":"3px"},attrs:{src:s.row.goodsImg,"preview-src-list":[s.row.goodsImg]}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"orderId",label:"Order ID"}}),t("el-table-column",{attrs:{prop:"goodsName",label:"Product","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{attrs:{href:"/front/detail?id="+s.row.goodsId}},[e._v(e._s(s.row.goodsName))])]}}])}),t("el-table-column",{attrs:{prop:"businessName",label:"Shop"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{attrs:{href:"/front/business?id="+s.row.businessId}},[e._v(e._s(s.row.businessName))])]}}])}),t("el-table-column",{attrs:{prop:"goodsPrice",label:"Price",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.goodsPrice)+" / "+e._s(t.row.goodsUnit)+" ")]}}])}),t("el-table-column",{attrs:{prop:"num",label:"Quantity"}}),t("el-table-column",{attrs:{prop:"price",label:"Total"}}),t("el-table-column",{attrs:{prop:"username",label:"To"}}),t("el-table-column",{attrs:{prop:"useraddress",label:"Address"}}),t("el-table-column",{attrs:{prop:"phone",label:"Contact"}}),t("el-table-column",{attrs:{prop:"status",width:"100",label:"Track"}}),t("el-table-column",{attrs:{label:"Operation",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return["Pending Receipt"===s.row.status?t("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.updateStatus(s.row,"Completed")}}},[e._v("Received")]):e._e(),"Completed"===s.row.status?t("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.addComment(s.row,"Reviewed")}}},[e._v("Review")]):e._e(),t("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.del(s.row.id)}}},[e._v("Delete")])]}}])})],1),t("div",{staticClass:"pagination",staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])])]),t("el-dialog",{attrs:{title:"Please enter your comments",visible:e.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.fromVisible=t}}},[t("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"Reviews",prop:"username"}},[t("el-input",{attrs:{type:"textarea",placeholder:"Please enter your comments"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.fromVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("Confirm")])],1)],1)],1)},o=[],a={data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),ordersData:[],pageNum:1,pageSize:10,total:0,form:{},fromVisible:!1}},mounted(){this.loadOrders(1)},methods:{loadOrders(e){e&&(this.pageNum=e),this.$request.get("/orders/selectPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((e=>{"200"===e.code?(this.ordersData=e.data?.list,this.total=e.data?.total):this.$message.error(e.msg)}))},navTo(e){location.href=e},del(e){this.$request.delete("/orders/delete/"+e).then((e=>{"200"===e.code?(this.$message.success("Successfully Deleted"),this.loadOrders(1)):this.$message.error(e.msg)}))},handleCurrentChange(e){this.loadOrders(e)},updateStatus(e,t){this.form=e,this.form.status=t,this.$request.put("/orders/update",this.form).then((e=>{"200"===e.code?this.$message.success("Done!"):this.$message.error(e.msg)}))},addComment(e){this.fromVisible=!0,this.form=e},save(){let e={userId:this.user.id,businessId:this.form.businessId,goodsId:this.form.goodsId,content:this.form.content};this.$request.post("/comment/add",e).then((e=>{"200"===e.code?(this.$message.success("Done!"),this.fromVisible=!1,this.updateStatus(this.form,"Reviewed"),this.form={}):this.$message.error(e.msg)}))}}},l=a,i=s(1656),n=(0,i.A)(l,r,o,!1,null,null,null),d=n.exports}}]);
//# sourceMappingURL=603.799fbf93.js.map