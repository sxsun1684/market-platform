"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[559],{4559:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("div",{staticStyle:{width:"80%",background:"rgba(255, 255, 255, 0.4)","backdrop-filter":"blur(10px)",margin:"30px auto","border-radius":"20px"}},[t("div",{staticStyle:{"padding-bottom":"10px"}},[t("div",{staticStyle:{display:"flex","font-size":"18px",color:"#000000FF","line-height":"80px","border-bottom":"#cccccc 1px solid"}},[t("div",{staticStyle:{"margin-left":"20px",flex:"1"}},[e._v("All Products:"+e._s(e.goodsData.length)+" "+e._s(e.goodsData.length>1?"Pieces":"Piece"))]),t("div",{staticStyle:{flex:"2","text-align":"right"}},[t("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"Please select your delivery address..."},model:{value:e.addressId,callback:function(t){e.addressId=t},expression:"addressId"}},e._l(e.addressData,(function(e){return t("el-option",{attrs:{label:e.username+" - "+e.useraddress+" - "+e.phone,value:e.id}})})),1)],1),t("div",{staticStyle:{flex:"1","font-size":"16px","text-align":"right","padding-right":"20px"}},[e._v(" Selected: $"+e._s(e.totalPrice)+" "),t("el-button",{attrs:{type:"danger",round:""},on:{click:e.pay}},[e._v("Checkout")])],1)]),t("div",{staticStyle:{margin:"20px 0",padding:"0 50px"}},[t("div",{staticClass:"table"},[t("el-table",{attrs:{data:e.goodsData,strip:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{label:"Picture",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.goodsImg?t("el-image",{staticStyle:{width:"80px",height:"60px","border-radius":"3px"},attrs:{src:s.row.goodsImg,"preview-src-list":[s.row.goodsImg]}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"goodsName",label:"Product",width:"240px"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{attrs:{href:"/front/detail?id="+s.row.goodsId}},[e._v(e._s(s.row.goodsName))])]}}])}),t("el-table-column",{attrs:{prop:"businessName",label:"Shop Name"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{attrs:{href:"/front/business?id="+s.row.businessId}},[e._v(e._s(s.row.businessName))])]}}])}),t("el-table-column",{attrs:{prop:"goodsPrice",label:"Price"}}),t("el-table-column",{attrs:{prop:"num",label:"Quantity"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1},on:{change:function(t){return e.handleChange(s.row)}},model:{value:s.row.num,callback:function(t){e.$set(s.row,"num",t)},expression:"scope.row.num"}})]}}])}),t("el-table-column",{attrs:{label:"Operation",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.del(s.row.id)}}},[e._v("Remove")])]}}])})],1),t("div",{staticClass:"pagination",staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[5,10,20],"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])])])])},r=[],l=(s(8992),s(3949),{data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),goodsData:[],pageNum:1,pageSize:10,totalPrice:0,total:0,addressId:null,addressData:[],selectedData:[]}},mounted(){this.loadGoods(1),this.loadAddress()},methods:{loadAddress(){this.$request.get("/address/selectAll").then((e=>{"200"===e.code?this.addressData=e.data:this.$message.error(e.msg)}))},loadGoods(e){e&&(this.pageNum=e),this.$request.get("/cart/selectPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((e=>{"200"===e.code?(this.goodsData=e.data?.list,this.total=e.data?.total):this.$message.error(e.msg)}))},navTo(e){location.href=e},del(e){this.$request.delete("/cart/delete/"+e).then((e=>{"200"===e.code?(this.$message.success("Successfully Removed"),this.loadGoods(1)):this.$message.error(e.msg)}))},handleCurrentChange(e){this.loadGoods(e)},handleSelectionChange(e){this.totalPrice=0,this.selectedData=e,this.selectedData.forEach((e=>{this.totalPrice+=e.goodsPrice*e.num}))},handleChange(e){this.totalPrice=0,this.selectedData.forEach((e=>{this.totalPrice+=e.goodsPrice*e.num}))},pay(){if(!this.addressId)return void this.$message.warning("Please select your delivery address");if(!this.selectedData||0===this.selectedData.length)return void this.$message.warning("Please select products");let e={userId:this.user.id,addressId:this.addressId,status:"Pending Shipment",cartData:this.selectedData};this.$request.post("/orders/add",e).then((e=>{"200"===e.code?(this.$message.success("DoneÔºÅ"),this.loadGoods(1)):this.$message.error(e.msg)}))}}}),o=l,i=s(1656),d=(0,i.A)(o,a,r,!1,null,null,null),n=d.exports}}]);
//# sourceMappingURL=559.abbbcc13.js.map