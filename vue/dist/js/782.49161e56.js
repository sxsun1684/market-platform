"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[782],{5782:function(e,s,a){a.r(s),a.d(s,{default:function(){return u}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"main-content"},[s("el-card",{staticStyle:{width:"50%",margin:"30px auto"}},[s("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.updatePassword}},[e._v("Change Password")])],1),s("el-form",{staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px"}},[s("div",{staticStyle:{margin:"15px","text-align":"center"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$baseUrl+"/files/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.user.avatar?s("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{attrs:{label:"Account",prop:"username"}},[s("el-input",{attrs:{placeholder:"Username",disabled:""},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),s("el-form-item",{attrs:{label:"Name",prop:"name"}},[s("el-input",{attrs:{placeholder:"Name"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}})],1),s("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[s("el-input",{attrs:{placeholder:"Phone"},model:{value:e.user.phone,callback:function(s){e.$set(e.user,"phone",s)},expression:"user.phone"}})],1),s("el-form-item",{attrs:{label:"Email",prop:"email"}},[s("el-input",{attrs:{placeholder:"Email"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1),s("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("Save")])],1)],1)],1),s("el-dialog",{attrs:{title:"Change Password",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(s){e.dialogVisible=s}}},[s("el-form",{ref:"formRef",staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px",rules:e.rules}},[s("el-form-item",{attrs:{label:"Initial Password",prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:"Initial Password"},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),s("el-form-item",{attrs:{label:"New Password",prop:"newPassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"New Password"},model:{value:e.user.newPassword,callback:function(s){e.$set(e.user,"newPassword",s)},expression:"user.newPassword"}})],1),s("el-form-item",{attrs:{label:"Confirm Password",prop:"confirmPassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"Confirm Password"},model:{value:e.user.confirmPassword,callback:function(s){e.$set(e.user,"confirmPassword",s)},expression:"user.confirmPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){e.fromVisible=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("Save")])],1)],1)],1)},t=[],l=(a(4114),{data(){const e=(e,s,a)=>{""===s?a(new Error("Please Confirm Password")):s!==this.user.newPassword?a(new Error("Wrong Password")):a()};return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),dialogVisible:!1,rules:{password:[{required:!0,message:"Please Enter Initial Password",trigger:"blur"}],newPassword:[{required:!0,message:"Please Enter New Password",trigger:"blur"}],confirmPassword:[{validator:e,required:!0,trigger:"blur"}]}}},created(){},methods:{update(){this.$request.put("/user/update",this.user).then((e=>{"200"===e.code?(this.$message.success("Successfully Saved"),localStorage.setItem("xm-user",JSON.stringify(this.user)),this.$emit("update:user")):this.$message.error(e.msg)}))},handleAvatarSuccess(e,s,a){this.$set(this.user,"avatar",e.data)},updatePassword(){this.dialogVisible=!0},save(){this.$refs.formRef.validate((e=>{e&&this.$request.put("/updatePassword",this.user).then((e=>{"200"===e.code?(this.$message.success("Done!"),this.$router.push("/login")):this.$message.error(e.msg)}))}))}}}),o=l,i=a(1656),n=(0,i.A)(o,r,t,!1,null,"6534e092",null),u=n.exports}}]);
//# sourceMappingURL=782.49161e56.js.map